{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Inicio · CaʼBigote Barber Shop{% endblock %}

{% block content %}
<div class="container py-5">

  <!-- HERO -->
  <div class="row align-items-center mb-5 flex-column flex-lg-row">
    <div class="col-lg-6 text-center text-lg-start mb-4 mb-lg-0">
      <h2 class="display-4 fw-bold text-ink animate-on-load hero-title">Bienvenido a CaʼBigote</h2>
      <p class="lead mb-4 text-ink-muted">
        Donde el estilo se encuentra con la tradición. Ubicados en el corazón de Arrecife,
        ofrecemos cortes de cabello y arreglos de barba con la máxima calidad.
      </p>
      <div class="d-flex gap-3 justify-content-center justify-content-lg-start">
        <a href="{% url 'appointments:reservar_cita' %}" class="btn btn-gold btn-lg">Reservar cita</a>
        <a href="{% url 'services:ver_servicios' %}" class="btn btn-outline-gold btn-lg">Ver servicios</a>
      </div>
    </div>

    <div class="col-lg-6 text-center position-relative hero-glow">
      <!-- NUEVO WRAPPER -->
      <div class="hero-frame rounded-4">
        <img
          src="{% static 'imagenes/cabigote.webp' %}"
          alt="Logo CaʼBigote"
          class="hero-image img-fluid mx-auto animate-on-load rounded-4 shadow-none border-0"
          loading="lazy">
      </div>
    </div>
  </div>


  <!-- TARIFA -->
  <section class="my-5" aria-labelledby="tarifa-title">
    <div class="card-user-profile animate-on-load">
      <div class="mb-4 card-header gradiente-header shadow-0 bg-transparent text-center p-2 border-0">
        <h2 id="tarifa-title" class="h4 fw-bold mb-0 text-ink">
          <i class="fas fa-scissors me-2 text-gold" aria-hidden="true"></i>
          Tarifa de Servicios
        </h2>
      </div>

      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card card-glass overflow-hidden animate-on-load">
            <div class="price-card-head text-center py-2 text-ink-muted small">Lista de Precios</div>
            <ul class="list-unstyled m-0 price-list">
              {% for servicio in servicios|slice:":10" %}
                <li class="price-item d-flex align-items-center justify-content-between">
                  <span class="service-name">{{ servicio.nombre }}</span>
                  <span class="service-price">{{ servicio.precio }} €</span>
                </li>
              {% empty %}
                <li class="text-center py-4 text-ink-muted">Todavía no hay servicios cargados.</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>

      <div class="text-center mt-4">
        <a href="{% url 'services:ver_servicios' %}" class="btn btn-gold btn-lg">
          Descubre Nuestros Servicios
        </a>
      </div>
    </div>
  </section>

  <!-- PWA -->
  <section class="py-5 bg-section" aria-labelledby="pwa-title">
    <div class="container">
      <div class="card card-glass p-4 animate-on-load">
        <div class="row g-4 align-items-center flex-column flex-md-row">

          <div class="col-12 col-md-6 d-flex justify-content-center gap-3">
            <img
              src="{% static 'imagenes/mockup-laptop.webp' %}"
              alt="Vista en portátil"
              class="mockup-laptop rounded-3 shadow-sm border-0"
              loading="lazy">
            <img
              src="{% static 'imagenes/mockup-phone.webp' %}"
              alt="Vista en móvil"
              class="mockup-phone rounded-3 shadow-sm border-0"
              loading="lazy">
          </div>

          <div class="col-12 col-md-6 text-center text-md-start animate-on-load">
            <h3 id="pwa-title" class="fw-bold mb-3 text-ink">¡Ya disponible nuestra App!</h3>
            <p class="text-ink-muted mb-4">
              Reserva citas, recibe recordatorios y gestiona tu perfil desde cualquier dispositivo.
            </p>
            <button id="btn-instalar" class="btn btn-outline-gold btn-lg d-none">
              <i class="bi bi-download me-1" aria-hidden="true"></i> Instalar Cabigote
            </button>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- SOCIAL -->
  <section class="my-5 animate-on-load" aria-labelledby="social-title">
    <div class="mb-4 card-header gradiente-header bg-transparent text-center p-2 border-0">
      <h2 id="social-title" class="h4 fw-bold mb-0 text-ink">
        <i class="fas fa-globe me-2 text-gold" aria-hidden="true"></i>
        Publicaciones
      </h2>
    </div>
    <div class="row g-4 justify-content-center">
      <div class="col-12 col-md-6">
        <div class="instagram-embed rounded-4 shadow-sm mb-4 bg-section border-0">
          <iframe
            src="https://www.instagram.com/p/C9ecZGftT6b/embed"
            title="Publicación de Instagram de Ca’Bigote"
            allowtransparency="true"
            allowfullscreen
            loading="lazy">
          </iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section class="my-3" aria-labelledby="about-title">
    <div class="card card-glass card-user-profile text-center p-4 animate-on-load">
      <h3 id="about-title" class="fw-bold mb-3 text-ink">¿Por qué elegirnos?</h3>
      <p class="lead text-ink-muted">
        En CaʼBigote cada visita es una experiencia personalizada. Nuestros barberos están
        dedicados a brindarte el mejor servicio en un ambiente acogedor y moderno.
      </p>
      <a href="{% url 'appointments:reservar_cita' %}" class="btn btn-gold btn-lg">Agenda tu Cita</a>
    </div>
  </section>

</div>
{% endblock %}
